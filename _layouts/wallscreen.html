{% assign wallscreen = site.data.wallscreens[page.wallscreen] %}
<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{{ page.title }}</title>
    <meta name="description" content="{{ page.description }}">
    <meta name="author" content="Gary Geisler">

    <link rel="icon" href="{% link images/favicon.ico %}">
    <script src="{% link js/qrcode.min.js %}"></script>
    <script type="module" src="{% link js/experiences.js %}"></script>
    <script src="{% link js/openseadragon.js %}"></script>
    <script src="{% link js/application.js %}"></script>

    <link rel="stylesheet" href="{% link css/wallscreen.scss %}">
    {% if page.extra_css %}
      <link rel="stylesheet" href="{% link css/{{ page.extra_css }}.scss %}">
    {% endif %}
    {% include _analytics.html %}
  </head>

  <body>
    {% for other_experience in wallscreen.experiences %}
      {% if other_experience.key == page.experience %}
        {% assign next_index = forloop.index0 | plus: 1 %}
        {% assign next_experience = wallscreen.experiences[next_index] %}
        {% break %}
      {% endif %}
    {% endfor %}

    <div class="wallscreen {{ layout.controller }} {{ page.experience }}"
      {% if layout.controller %}
      data-controller="{{ layout.controller }} more-info"
      {% if next_experience.key %}data-{{layout.controller}}-next-value="{% link _wallscreens/{{ page.wallscreen }}/{{ next_experience.key }}/index.html %}" {% endif %}
      {% case layout.controller %}
        {% when 'oral-history' %}
        data-action="more-info:show->oral-history#pause more-info:hide->oral-history#unpause more-info:show->oral-history#resetAutoplayTimer more-info:hide->oral-history#resetAutoplayTimer"
        {% else %}
        data-action="click@document->{{ layout.controller }}#resetAutoplayTimer"
      {% endcase %}
      {% endif %}>
      {{ content }}
    </div>
  </body>
</html>
